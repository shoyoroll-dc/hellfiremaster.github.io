<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©ì²­í•œìœ ë¼ã…‹ì”¨ í‚¤ìš°ê¸° ê²Œì„</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; }
        #game-container { max-width: 600px; margin: 20px auto; }
        .card { padding: 20px; }
        #stats { margin-bottom: 20px; }
        .progress { height: 30px; }
        .emoji { font-size: 2em; }
        .celebration, .failure {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 215, 0, 0.8);
            color: #000;
            padding: 20px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            animation: celebrationAnimation 2s ease-in-out;
            z-index: 9999;
        }

        .failure {
            background-color: rgba(255, 69, 0, 0.8);
        }

        @keyframes celebrationAnimation {
            0% { transform: scale(1); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="game-container" class="card">
        <h1 class="text-center">ë©ì²­í•œìœ ë¼ã…‹ì”¨ í‚¤ìš°ê¸° ê²Œì„</h1>
        <h4 class="text-center">ë¯¸ì…˜: SQLD, ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ìê²©ì¦ ì·¨ë“, ì—…ë¬´ì„±ê³µ 1</h4>
        <div id="stats"></div>
        <div id="actions" class="d-flex flex-column"></div>
        <div id="message" class="mt-3 text-center"></div>
    </div>
    <div id="celebration" style="display: none;" class="celebration"></div>
    <div id="failure" style="display: none;" class="failure"></div>
    <div id="restart-container" style="display: none;" class="text-center mt-4">
        <button class="btn btn-primary" onclick="location.reload()">ë‹¤ì‹œ ì‹œì‘</button>
    </div>
    <script>
        class Game {
            constructor() {
                this.day = 1;
                this.isWeekend = false;
                this.stress = 50;
                this.sqld = 0;
                this.infoProcessing = 0;
                this.workSuccess = 0;
                this.sqldCertified = false;
                this.infoProcCertified = false;
            }

            updateStats() {
                const stressColor = this.stress >= 150 ? 'danger' : this.stress >= 100 ? 'warning' : 'success';
                document.getElementById('stats').innerHTML = `
                    <p>ë‚ ì§œ: ${this.day} (${this.isWeekend ? 'ì£¼ë§' : 'í‰ì¼'})</p>
                    <p>ìŠ¤íŠ¸ë ˆìŠ¤: 
                        <span class="emoji">${this.stress >= 150 ? 'ğŸ˜¡' : this.stress >= 100 ? 'ğŸ˜Ÿ' : 'ğŸ˜Š'}</span>
                        <div class="progress">
                            <div class="progress-bar bg-${stressColor}" role="progressbar" style="width: ${this.stress / 2}%;" 
                                aria-valuenow="${this.stress}" aria-valuemin="0" aria-valuemax="200">
                                ${this.stress.toFixed(1)}
                            </div>
                        </div>
                    </p>
                    <p>SQLD ì ìˆ˜: ${this.sqld.toFixed(2)}${this.sqldCertified ? ' (ì·¨ë“)' : ''}</p>
                    <p>ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ì ìˆ˜: ${this.infoProcessing.toFixed(2)}${this.infoProcCertified ? ' (ì·¨ë“)' : ''}</p>
                    <p>ì—…ë¬´ ì„±ê³µ: ${this.workSuccess}</p>
                `;
            }

            updateActions() {
                const actionsDiv = document.getElementById('actions');
                actionsDiv.innerHTML = '';
                if (this.isWeekend) {
                    actionsDiv.innerHTML += `
                        <button class="btn btn-outline-primary my-2" onclick="game.studySQLD()">SQLD ê³µë¶€</button>
                        <button class="btn btn-outline-primary my-2" onclick="game.studyInfoProcessing()">ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ê³µë¶€</button>
                        <button class="btn btn-outline-danger my-2" onclick="game.drinkAlcohol()">ìˆ  ì³ë¨¹ê¸°</button>
                    `;
                } else {
                    actionsDiv.innerHTML += `
                        <button class="btn btn-outline-success my-2" onclick="game.workDay()">ì—…ë¬´í•˜ê¸°</button>
                        <button class="btn btn-outline-warning my-2" onclick="game.writePost()">í”„ë¡œê·¸ë˜ë° ê°¤ëŸ¬ë¦¬ì— ê¸€ì“°ê¸°</button>
                    `;
                }
            }

            increaseScore(currentScore, type) {
                if (currentScore < 58) {
                    return Math.min(58, currentScore + Math.random() * 15);
                } else {
                    let newScore = currentScore + Math.random() * 0.35;
                    if (newScore >= 60 && ((type === 'sqld' && !this.sqldCertified) || (type === 'infoProc' && !this.infoProcCertified))) {
                        this.showCelebration(type === 'sqld' ? 'SQLD ìê²©ì¦ ì·¨ë“!' : 'ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ìê²©ì¦ ì·¨ë“!');
                        if (type === 'sqld') this.sqldCertified = true;
                        else this.infoProcCertified = true;
                    }
                    return newScore;
                }
            }

            studySQLD() {
                this.sqld = this.increaseScore(this.sqld, 'sqld');
                this.stress = Math.min(200, this.stress + 15);
                this.message("SQLD ê³µë¶€ë¥¼ í–ˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¡°ê¸ˆ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                this.nextDay();
            }

            studyInfoProcessing() {
                this.infoProcessing = this.increaseScore(this.infoProcessing, 'infoProc');
                this.stress = Math.min(200, this.stress + 15);
                this.message("ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ê³µë¶€ë¥¼ í–ˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¡°ê¸ˆ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                this.nextDay();
            }

            drinkAlcohol() {
                this.stress = Math.max(0, this.stress - 30);
                this.message("ìˆ ì„ ì³ë¨¹ì—ˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í¬ê²Œ ê°ì†Œí–ˆìŠµë‹ˆë‹¤.");
                this.nextDay();
            }

            workDay() {
                this.stress = Math.min(200, this.stress + 20);
                if (Math.random() < 0.1) {
                    this.workSuccess++;
                    this.stress = Math.max(0, this.stress - 40);
                    this.message("ì—…ë¬´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤! ìƒì‚¬ì—ê²Œ ì¹­ì°¬ì„ ë°›ì•„ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í¬ê²Œ ê°ì†Œí–ˆìŠµë‹ˆë‹¤.");
                } else {
                    this.message("í•œë‚¨ìƒì‚¬ì—ê²Œ í˜¼ë‚¬ìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                }
                this.nextDay();
            }

            writePost() {
                if (Math.random() < 0.1) {
                    this.stress = Math.min(200, this.stress + 40);
                    this.message("í”„ë¡œê·¸ë˜ë° ê°¤ëŸ¬ë¦¬ì— ê¸€ì„ ì¼ëŠ”ë° í•œë‚¨ìƒì‚¬ì—ê²Œ ë“¤ì¼°ìŠµë‹ˆë‹¤. í¬ê²Œ í˜¼ë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ëŒ€í­ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                } else {
                    this.stress = Math.max(0, this.stress - 10);
                    this.message("í”„ë¡œê·¸ë˜ë° ê°¤ëŸ¬ë¦¬ì— í•œë‚¨ìƒì‚¬ í˜ì˜¤ê¸€ì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¡°ê¸ˆ ê°ì†Œí–ˆìŠµë‹ˆë‹¤.");
                }
                this.nextDay();
            }

            nextDay() {
                this.day++;
                this.isWeekend = (this.day % 7 === 0 || this.day % 7 === 6);

                if (this.stress >= 200) {
                    this.stress = 200;
                    this.updateStats();
                    setTimeout(() => this.endGame(false), 500);
                } else {
                    this.checkEndGame();
                    this.updateStats();
                    this.updateActions();
                }
            }

            message(text) {
                document.getElementById('message').innerText = text;
            }

            checkEndGame() {
                if (this.sqld >= 60 && this.infoProcessing >= 60 && this.workSuccess >= 1) {
                    this.endGame(true);
                }
            }

            endGame(isHappy) {
                if (isHappy) {
                    this.showCelebration("ì¶•í•˜í•©ë‹ˆë‹¤! ê²Œì„ì„ í´ë¦¬ì–´í–ˆìŠµë‹ˆë‹¤!");
                } else {
                    this.showFailure("ê²Œì„ ì˜¤ë²„! ìŠ¤íŠ¸ë ˆìŠ¤ê°€ 200ì— ë„ë‹¬í•˜ì—¬ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.");
                }
                document.getElementById('restart-container').style.display = 'block';
                document.getElementById('actions').innerHTML = '';
            }

            showCelebration(message) {
                const celebrationDiv = document.getElementById('celebration');
                celebrationDiv.innerText = message;
                celebrationDiv.style.display = 'block';
                setTimeout(() => {
                    celebrationDiv.style.display = 'none';
                }, 2000);

                const buttons = document.querySelectorAll('button');
                buttons.forEach(button => button.disabled = true);
                setTimeout(() => {
                    buttons.forEach(button => button.disabled = false);
                }, 1000);
            }

            showFailure(message) {
                const failureDiv = document.getElementById('failure');
                failureDiv.innerText = message;
                failureDiv.style.display = 'block';
                setTimeout(() => {
                    failureDiv.style.display = 'none';
                }, 2000);
            }

            start() {
                this.updateStats();
                this.updateActions();
            }
        }

        const game = new Game();
        game.start();
    </script>
</body>
</html>
