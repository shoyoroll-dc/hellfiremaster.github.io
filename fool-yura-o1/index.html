<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©ì²­í•œìœ ë¼ã…‹ì”¨ í‚¤ìš°ê¸° ê²Œì„</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; }
        #game-container { max-width: 600px; margin: 20px auto; }
        .card { padding: 20px; }
        #stats { margin-bottom: 20px; }
        .progress { height: 30px; }
        .emoji { font-size: 2em; }
        .mission-list li.completed { text-decoration: line-through; color: green; }
        .mission-list li.incomplete { color: red; }
    </style>
</head>
<body>
    <div id="game-container" class="card">
        <h1 class="text-center">ë©ì²­í•œìœ ë¼ã…‹ì”¨ í‚¤ìš°ê¸° ê²Œì„</h1>
        <!-- ë¯¸ì…˜ ëª©ë¡ì„ ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ id ì¶”ê°€ -->
        <ul id="mission-list" class="mission-list">
            <li id="mission-sqld">SQLD ìê²©ì¦ ì·¨ë“</li>
            <li id="mission-infoProc">ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ìê²©ì¦ ì·¨ë“</li>
            <li id="mission-work">ì—…ë¬´ ì„±ê³µ 1íšŒ</li>
        </ul>
        <div id="stats"></div>
        <div id="actions" class="d-flex flex-column"></div>
        <div id="message" class="mt-3 text-center"></div>
    </div>
    <!-- ëª¨ë‹¬ì„ í‘œì‹œí•˜ê¸° ìœ„í•œ ì»¨í…Œì´ë„ˆ -->
    <!-- ì„±ê³µ ëª¨ë‹¬ -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="successModalLabel">ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
          </div>
          <div class="modal-body" id="successModalBody">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">ë‹«ê¸°</button>
          </div>
        </div>
      </div>
    </div>
    <!-- ì‹¤íŒ¨ ëª¨ë‹¬ -->
    <div class="modal fade" id="failureModal" tabindex="-1" aria-labelledby="failureModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="failureModalLabel">ğŸ˜¢ ê²Œì„ ì˜¤ë²„</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
          </div>
          <div class="modal-body" id="failureModalBody">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
          </div>
        </div>
      </div>
    </div>
    <div id="restart-container" style="display: none;" class="text-center mt-4">
        <button class="btn btn-primary" onclick="location.reload()">ë‹¤ì‹œ ì‹œì‘</button>
    </div>
    <!-- Bootstrap JS (Modal ë™ì‘ì„ ìœ„í•´ í•„ìš”) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        class Game {
            constructor() {
                this.day = 1;
                this.isWeekend = false;
                this.stress = 50;
                this.sqld = 0;
                this.infoProcessing = 0;
                this.workSuccess = 0;
                this.sqldCertified = false;
                this.infoProcCertified = false;
                this.missions = {
                    sqld: false,
                    infoProc: false,
                    work: false
                };
            }
    
            updateStats() {
                const stressColor = this.stress >= 150 ? 'danger' : this.stress >= 100 ? 'warning' : 'success';
                document.getElementById('stats').innerHTML = `
                    <p>ë‚ ì§œ: ${this.day} (${this.isWeekend ? 'ì£¼ë§' : 'í‰ì¼'})</p>
                    <p>ìŠ¤íŠ¸ë ˆìŠ¤: 
                        <span class="emoji">${this.stress >= 150 ? 'ğŸ˜¡' : this.stress >= 100 ? 'ğŸ˜Ÿ' : 'ğŸ˜Š'}</span>
                        <div class="progress">
                            <div class="progress-bar bg-${stressColor}" role="progressbar" style="width: ${this.stress / 2}%;" 
                                aria-valuenow="${this.stress}" aria-valuemin="0" aria-valuemax="200">
                                ${this.stress.toFixed(1)}
                            </div>
                        </div>
                    </p>
                    <p>SQLD ì ìˆ˜: ${this.sqld.toFixed(2)}${this.sqldCertified ? ' (ì·¨ë“)' : ''}</p>
                    <p>ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ì ìˆ˜: ${this.infoProcessing.toFixed(2)}${this.infoProcCertified ? ' (ì·¨ë“)' : ''}</p>
                    <p>ì—…ë¬´ ì„±ê³µ: ${this.workSuccess}</p>
                `;
                this.updateMissionList();
            }

            updateMissionList() {
                // ë¯¸ì…˜ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
                const missionSqld = document.getElementById('mission-sqld');
                const missionInfoProc = document.getElementById('mission-infoProc');
                const missionWork = document.getElementById('mission-work');

                if(this.missions.sqld) {
                    missionSqld.classList.remove('incomplete');
                    missionSqld.classList.add('completed');
                } else {
                    missionSqld.classList.remove('completed');
                    missionSqld.classList.add('incomplete');
                }

                if(this.missions.infoProc) {
                    missionInfoProc.classList.remove('incomplete');
                    missionInfoProc.classList.add('completed');
                } else {
                    missionInfoProc.classList.remove('completed');
                    missionInfoProc.classList.add('incomplete');
                }

                if(this.missions.work) {
                    missionWork.classList.remove('incomplete');
                    missionWork.classList.add('completed');
                } else {
                    missionWork.classList.remove('completed');
                    missionWork.classList.add('incomplete');
                }
            }
    
            updateActions() {
                const actionsDiv = document.getElementById('actions');
                actionsDiv.innerHTML = '';
                if (this.isWeekend) {
                    actionsDiv.innerHTML += `
                        <button class="btn btn-outline-primary my-2" onclick="game.studySQLD()">SQLD ê³µë¶€</button>
                        <button class="btn btn-outline-primary my-2" onclick="game.studyInfoProcessing()">ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ê³µë¶€</button>
                        <button class="btn btn-outline-danger my-2" onclick="game.drinkAlcohol()">ìˆ  ì³ë¨¹ê¸°</button>
                    `;
                } else {
                    actionsDiv.innerHTML += `
                        <button class="btn btn-outline-success my-2" onclick="game.workDay()">ì—…ë¬´í•˜ê¸°</button>
                        <button class="btn btn-outline-warning my-2" onclick="game.writePost()">í”„ë¡œê·¸ë˜ë° ê°¤ëŸ¬ë¦¬ì— ê¸€ì“°ê¸°</button>
                    `;
                }
            }
    
            increaseScore(currentScore, type) {
                if (currentScore < 58) {
                    return Math.min(58, currentScore + Math.random() * 15);
                } else {
                    let newScore = currentScore + Math.random() * 0.35;
                    if (newScore >= 60 && ((type === 'sqld' && !this.sqldCertified) || (type === 'infoProc' && !this.infoProcCertified))) {
                        this.showModal('success', type === 'sqld' ? 'SQLD ìê²©ì¦ì„ ì·¨ë“í•˜ì˜€ìŠµë‹ˆë‹¤!' : 'ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ìê²©ì¦ì„ ì·¨ë“í•˜ì˜€ìŠµë‹ˆë‹¤!');
                        if (type === 'sqld') {
                            this.sqldCertified = true;
                            this.missions.sqld = true;
                        } else {
                            this.infoProcCertified = true;
                            this.missions.infoProc = true;
                        }
                        this.updateMissionList();
                        this.checkEndGame();
                    }
                    return newScore;
                }
            }
    
            studySQLD() {
                this.sqld = this.increaseScore(this.sqld, 'sqld');
                this.stress = Math.min(200, this.stress + 15);
                this.message("SQLD ê³µë¶€ë¥¼ í–ˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¡°ê¸ˆ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                this.nextDay();
            }
    
            studyInfoProcessing() {
                this.infoProcessing = this.increaseScore(this.infoProcessing, 'infoProc');
                this.stress = Math.min(200, this.stress + 15);
                this.message("ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ê³µë¶€ë¥¼ í–ˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¡°ê¸ˆ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                this.nextDay();
            }
    
            drinkAlcohol() {
                this.stress = Math.max(0, this.stress - 30);
                this.message("ìˆ ì„ ì³ë¨¹ì—ˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í¬ê²Œ ê°ì†Œí–ˆìŠµë‹ˆë‹¤.");
                this.nextDay();
            }
    
            workDay() {
                this.stress = Math.min(200, this.stress + 20);
                if (Math.random() < 0.1) {
                    this.workSuccess++;
                    this.stress = Math.max(0, this.stress - 40);
                    this.message("ì—…ë¬´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤! ìƒì‚¬ì—ê²Œ ì¹­ì°¬ì„ ë°›ì•„ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í¬ê²Œ ê°ì†Œí–ˆìŠµë‹ˆë‹¤.");
                    if (!this.missions.work) {
                        this.missions.work = true;
                        this.updateMissionList();
                        this.showModal('success', 'ì—…ë¬´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤!');
                        this.checkEndGame();
                    }
                } else {
                    this.message("í•œë‚¨ìƒì‚¬ì—ê²Œ í˜¼ë‚¬ìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                }
                this.nextDay();
            }
    
            writePost() {
                if (Math.random() < 0.1) {
                    this.stress = Math.min(200, this.stress + 40);
                    this.message("í”„ë¡œê·¸ë˜ë° ê°¤ëŸ¬ë¦¬ì— ê¸€ì„ ì¼ëŠ”ë° í•œë‚¨ìƒì‚¬ì—ê²Œ ë“¤ì¼°ìŠµë‹ˆë‹¤. í¬ê²Œ í˜¼ë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ëŒ€í­ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.");
                } else {
                    this.stress = Math.max(0, this.stress - 10);
                    this.message("í”„ë¡œê·¸ë˜ë° ê°¤ëŸ¬ë¦¬ì— í•œë‚¨ìƒì‚¬ í˜ì˜¤ê¸€ì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¡°ê¸ˆ ê°ì†Œí–ˆìŠµë‹ˆë‹¤.");
                }
                this.nextDay();
            }
    
            nextDay() {
                this.day++;
                this.isWeekend = (this.day % 7 === 0 || this.day % 7 === 6);
    
                if (this.stress >= 200) {
                    this.stress = 200;
                    this.updateStats();
                    setTimeout(() => this.endGame(false), 500);
                } else {
                    this.updateStats();
                    this.updateActions();
                }
            }
    
            message(text) {
                document.getElementById('message').innerText = text;
            }
    
            checkEndGame() {
                if (this.missions.sqld && this.missions.infoProc && this.missions.work) {
                    this.endGame(true);
                }
            }
    
            endGame(isHappy) {
                if (isHappy) {
                    this.showModal('success', "ëª¨ë“  ë¯¸ì…˜ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤! ê²Œì„ì„ í´ë¦¬ì–´í–ˆìŠµë‹ˆë‹¤!");
                } else {
                    this.showModal('failure', "ìŠ¤íŠ¸ë ˆìŠ¤ê°€ 200ì— ë„ë‹¬í•˜ì—¬ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.");
                }
                document.getElementById('restart-container').style.display = 'block';
                document.getElementById('actions').innerHTML = '';
            }
    
            showModal(type, message) {
                if (type === 'success') {
                    document.getElementById('successModalBody').innerText = message;
                    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                    successModal.show();
                } else if (type === 'failure') {
                    document.getElementById('failureModalBody').innerText = message;
                    const failureModal = new bootstrap.Modal(document.getElementById('failureModal'));
                    failureModal.show();
                }
            }
    
            start() {
                this.updateStats();
                this.updateActions();
            }
        }
    
        const game = new Game();
        game.start();
    </script>
</body>
</html>